# ============================================================================
# ICT Agent - Environment Variables Configuration
# ============================================================================
# Copy this file to .env and fill in your actual values
# DO NOT commit .env to version control (it's in .gitignore)

# ============================================================================
# REQUIRED: API Keys
# ============================================================================

# OpenAI API Key (Required)
# Get from: https://platform.openai.com/api-keys
OPENAI_API_KEY=your_openai_api_key_here

# API Key for endpoint authentication (Required)
# Generate a secure random string: openssl rand -hex 32
API_KEY=your_api_key_here

# ============================================================================
# Domain Configuration
# ============================================================================

# Base URL for your API (used for webhooks and external references)
# Example: https://zensbot.cloud or https://api.yourdomain.com
API_BASE_URL=https://zensbot.cloud

# Webhook endpoint URL (auto-constructed from API_BASE_URL if not set)
# Leave empty to auto-generate from API_BASE_URL
# SHEETS_WEBHOOK_URL=https://zensbot.cloud/webhooks/google-sheets-update

# ============================================================================
# Google Sheets Configuration
# ============================================================================
# Choose ONE authentication method: OAuth2 (recommended) OR Service Account

# --- Option 1: OAuth2 (Recommended for Production) ---
# Get these from Google Cloud Console > APIs & Services > Credentials
GOOGLE_SHEETS_CLIENT_ID=your_client_id.apps.googleusercontent.com
GOOGLE_SHEETS_CLIENT_SECRET=your_client_secret_here
GOOGLE_SHEETS_REFRESH_TOKEN=your_refresh_token_here

# --- Option 2: Service Account (Alternative) ---
# Path to service account JSON file (if using service account instead of OAuth2)
# Leave empty if using OAuth2
# GOOGLE_SHEETS_CREDENTIALS_PATH=/app/credentials/google-sheets-service-account.json

# --- Required for Both Methods ---
# Google Sheets Spreadsheet ID (from the spreadsheet URL)
GOOGLE_SHEETS_SPREADSHEET_ID=1lJQfvDqarAxQXWZlyfMLjEbwpkEjBBkcWvSY3226_I0

# Comma-separated list of sheet names to cache
GOOGLE_SHEETS_SHEET_NAMES=Course_Details,Course_Links,FAQs,About_Profr,Company_Info

# ============================================================================
# Google Sheets Webhook Configuration
# ============================================================================

# Enable webhook for real-time updates (default: true)
SHEETS_WEBHOOK_ENABLED=true

# Webhook secret for authentication (generate: openssl rand -hex 32)
SHEETS_WEBHOOK_SECRET=generate_secure_random_string_here

# Enable fallback polling as safety net (default: true)
SHEETS_FALLBACK_POLL_ENABLED=true

# Fallback poll interval in seconds (default: 86400 = 24 hours)
SHEETS_FALLBACK_POLL_INTERVAL=86400

# ============================================================================
# Redis Configuration (Optional)
# ============================================================================
# Redis is optional - app will use in-memory cache if Redis is not available
# To use Redis, start with: docker compose --profile with-redis up

# Redis host (default: localhost)
# Use 'redis' if Redis is running in Docker Compose
REDIS_HOST=localhost

# Redis port (default: 6379)
REDIS_PORT=6379

# Redis password (leave empty if no password)
REDIS_PASSWORD=

# Redis database number (default: 0)
REDIS_DB=0

# ============================================================================
# ChromaDB Configuration
# ============================================================================

# Path for ChromaDB vector store (for semantic search)
# In Docker: use /app/sheets_index_db
# Local: use ./sheets_index_db
CHROMA_DB_PATH=/app/sheets_index_db

# ============================================================================
# LLM Model Configuration
# ============================================================================

# OpenAI model name (default: gpt-4.1-mini)
# Options: gpt-4.1-mini (recommended), gpt-4o, gpt-4-turbo, gpt-3.5-turbo, etc.
# Note: gpt-4.1-mini has 128k context window and supports tool calling
MODEL_NAME=gpt-4.1-mini

# Model temperature (0.0-2.0, default: 0.7)
# Lower = more deterministic, Higher = more creative
TEMPERATURE=0.7

# ============================================================================
# Memory & Storage Configuration
# ============================================================================

# Path to memory database
# In Docker: use /app/memory_db
# Local: use ./memory_db
MEMORY_DB_PATH=/app/memory_db

# Number of conversation turns before summarizing (default: 10)
SUMMARIZE_INTERVAL=10

# Graph recursion limit (default: 50)
# Maximum number of graph node executions before timeout
# Increase if agent makes many sequential tool calls
RECURSION_LIMIT=50

# ============================================================================
# API Server Configuration
# ============================================================================

# API host (default: 0.0.0.0 for Docker)
API_HOST=0.0.0.0

# API port (default: 8009)
API_PORT=8009

# Environment (production, development, staging)
ENVIRONMENT=production

# ============================================================================
# Performance Settings
# ============================================================================

# Number of worker processes (default: 1 for local, 4 for production)
WORKERS=4

# Maximum concurrent connections (default: 100)
MAX_CONCURRENT=100

# Keep-alive timeout in seconds (default: 120)
KEEP_ALIVE=120

# Request timeout in seconds (default: 120)
TIMEOUT=120

# ============================================================================
# Logging Configuration
# ============================================================================

# Log level (debug, info, warning, error, critical)
# Default: info
LOG_LEVEL=info

# ============================================================================
# CORS & Security Configuration
# ============================================================================

# CORS allowed origins (comma-separated, * for all)
# Example: https://example.com,https://app.example.com
CORS_ORIGINS=*

# Trusted hosts (comma-separated, * for all)
# Example: example.com,*.example.com
TRUSTED_HOSTS=*

# ============================================================================
# Nginx Proxy Configuration
# ============================================================================

# Root path if running behind a proxy with subpath
# Example: /api (if your API is at https://example.com/api)
# Leave empty if running at root
ROOT_PATH=

# ============================================================================
# MCP RAG Configuration
# ============================================================================

# MCP RAG Sheets endpoint URL
MCP_RAG_SHEETS_URL=https://www.ictpk.cloud/mcp/rag-sheets

# ============================================================================
# Template Editor Admin Configuration
# ============================================================================

# Admin credentials for template editor web interface
# Access at: http://localhost:8009/admin
ADMIN_USERNAME=ictxzensbot
ADMIN_PASSWORD=ictxzensbot

# Note: Sessions never expire (persist until logout or server restart)

# ============================================================================
# Sentry Error Tracking Configuration
# ============================================================================
# Sign up at: https://sentry.io
# Create a new project and get your DSN from Project Settings > Client Keys

# Sentry DSN (Data Source Name) - Leave empty to disable Sentry
# Format: https://[key]@[org].ingest.sentry.io/[project-id]
SENTRY_DSN=

# Performance monitoring sample rate (0.0 to 1.0)
# 1.0 = capture 100% of transactions (expensive)
# 0.1 = capture 10% of transactions (recommended for production)
SENTRY_TRACES_SAMPLE_RATE=0.1

# Profiling sample rate (0.0 to 1.0)
# Captures detailed performance profiles
SENTRY_PROFILES_SAMPLE_RATE=0.1

# App version for release tracking (used in Sentry releases)
APP_VERSION=1.0.0
